{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KitapKurdu</title>
    
    <link rel="icon" type="image/png" href="{% static 'img/logo.png' %}">

    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <header class="header-area">
       
       <div class="logo">
         <a href="{% url 'index' %}">
             <img src="{% static 'img/logo.png' %}" alt="Logo" class="site-logo">
             <span>BookWorm</span>
         </a>
       </div>
       
       <div class="search-box">
            <form action="{% url 'search_view' %}" method="GET" style="display: flex; width: 100%;">
                <input type="text" name="q" placeholder="Search for books or authors..." required 
                       style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px 0 0 5px; outline: none;">
                
                <button type="submit" style="background: #e67e22; color: white; border: none; padding: 0 15px; border-radius: 0 5px 5px 0; cursor: pointer;">
                    <i class="fas fa-search"></i>
                </button>
            </form>
       </div>

       <div class="user-menu">
    
            {% if request.session.user_id %}
                
                <div class="custom-menu-container">
                    
                    <span class="username-btn">
                        üë§ {{ request.session.user_name }} ‚ñº
                    </span>

                    <div class="dropdown-menu">
                        <a href="{% url 'my_orders' %}" style="display: block; width: 100%; height: 100%;">üì¶ My Orders</a>
                        <a href="{% url 'my_favorites' %}">‚ù§Ô∏è Favorites</a>
                        
                        {% if request.session.user_type == 'seller' or request.session.user_type == 'satƒ±cƒ±' %}
                            <a href="{% url 'seller_dashboard' %}" style="color: #e67e22;">üè™ Seller Dashboard</a>
                        {% endif %}

                        <a href="{% url 'logout_view' %}" style="color: red;">üö™ Logout</a>
                    </div>
                </div>

            {% else %}
                <a href="{% url 'login_view' %}">Login</a>
                <a href="{% url 'register_view' %}">Register</a>
            {% endif %}

        </div>

<style>
    /* Container setting  */
    .custom-menu-container {
        position: relative;
        display: inline-block;
        cursor: pointer;
    }

    /* Username text */
    .username-btn {
        font-weight: bold;
        padding: 10px;
        color: #333;
    }

    /* Hidden menu box */
    .dropdown-menu {
        display: none;
        position: absolute;
        right: 0;
        top: 100%; 
        background-color: white;
        min-width: 180px;
        box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
        
        z-index: 10000 !important; 
        
        border-radius: 5px;
        border: 1px solid #ddd;
        margin-top: 5px;
    }

    /* Links inside menu */
    .dropdown-menu a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        border-bottom: 1px solid #eee;
    }

    .dropdown-menu a:hover {background-color: #f1f1f1;}
    .custom-menu-container:hover .dropdown-menu {
        display: block;
    }
</style>
    </header>

    <nav class="main-nav">
        <ul class="categories">
            <li><a href="{% url 'index' %}">All Books</a></li>
            {% for category in categories %}
            <li>
                <a href="{% url 'index' category_id=category.categoryid %}">
                {{ category.categoryname }}
                </a>
            </li>
            {% endfor %}
        </ul>
        
        <div class="cart-box">
            <a href="{% url 'cart_view' %}">
                <i class="fas fa-shopping-basket"></i> My Cart ({{ request.session.cart|length }})
            </a>
        </div>
    </nav>

    <main class="content-area">
        {% block content %}
        {% endblock %}
    </main>

</body>
</html>